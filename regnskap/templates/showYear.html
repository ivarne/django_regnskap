{% extends "base.html" %}
{% block title %}{{overskrift}}{% endblock %}

{% block content %}
<h2>{{overskrift}}</h2>
<div>
  <div style="float:left">
    <h3 style="text-align:center">Resultat</h3>
    <table class="rowTable">
      <tr>
        <th colspan="2">Kostnader</th>
        <th colspan="2">Inntekter</th>
      </tr>
      {% for kost, int in resultat %}
      <tr>
        {% if kost %}
        <td title="{{ kost.beskrivelse }}">{{ kost }}</td>
        {% else %}
        <td>&nbsp;</td>
        {% endif %}
        <td style="text-align:right">{{ kost.getLoadedDebit }}</td>
        {% if int %}
        <td title="{{ int.beskrivelse }}">{{ int }}</td>
        {% else %}
        <td>&nbsp;</td>
        {% endif %}
        <td style="text-align:right">{{ int.getLoadedKredit }}</td>
      </tr>
      {% endfor %}
      <tr>
        <td>Sum:</td>
        <td>{{totalKost}}</td>
        <td>Sum:</td>
        <td>{{totalInt}}</td>
      </tr>
    </table>
  </div>
  <div style="float:left">
    <h3 style="text-align:center">Balanse</h3>
    <table class="rowTable">
      <tr>
        <th colspan="2">Eiendeler</th>
        <th colspan="2">Egenkapital/gjeld</th>
      </tr>
      {% for eie, ege in balanse %}
      <tr>
        {% if eie %}
        <td title="{{ eie.beskrivelse }}">{{ eie }}</td>
        {% else %}
        <td>&nbsp;</td>
        {% endif %}
        <td style="text-align:right;" class="rightborder">{{ eie.getLoadedDebit }}</td>
        {% if ege %}
        <td title="{{ ege.beskrivelse }}">{{ ege }}</td>
        {% else %}
        <td>&nbsp;</td>
        {% endif %}
        <td style="text-align:right">{{ ege.getLoadedKredit }}</td>
      </tr>
      {% endfor %}
      <tr>
        <td>Sum:</td>
        <td>{{totalEie}}</td>
        <td>Sum:</td>
        <td>{{totalFinans}}</td>
      </tr>
    </table>
  </div>
</div>
<div style="clear:both"></div>
<h3>Bilagsliste</h3>
<table class="BilagListe">
  <tr>
    <th>#</th>
    <th>Dato</th>
    <th>Beskrivelse</th>
    <th>Hvem?</th>
    <th>Konto</th>
    <th>Debet</th>
    <th>Kredit</th>
  </tr>
  {% for bilag in bilagYear %}
  {% for innslag in bilag.innslag.all %}
  <tr>
    {% ifchanged bilag %}
    <td rowspan="{{bilag.innslag.count}}" class="topBorder">{{bilag.bilagsnummer|default:"&nbsp;"}}</td>
    <td rowspan="{{bilag.innslag.count}}" class="topBorder">{{bilag.dato|date:"j. b"|default:"&nbsp;"}}</td>
    <td rowspan="{{bilag.innslag.count}}" class="topBorder">{{bilag.beskrivelse|default:"&nbsp;"}}</td>
    <td rowspan="{{bilag.innslag.count}}" class="topBorder">{{bilag.external_actor|default:"&nbsp;"}}</td>
    <td class="topBorder">{{innslag.konto|default:"&nbsp;"}}</td>
    <td class="topBorder">{{innslag.debit|default_if_none:"&nbsp;"}}</td>
    <td class="topBorder">{{innslag.kredit|default_if_none:"&nbsp;"}}</td>
    {% else %}
    <td>{{innslag.konto|default:"&nbsp;"}}</td>
    <td>{{innslag.debit|default_if_none:"&nbsp;"}}</td>
    <td>{{innslag.kredit|default_if_none:"&nbsp;"}}</td>
    {% endifchanged %}
  </tr>
  {% endfor %}
  {% endfor %}
</table>
{% endblock %}
